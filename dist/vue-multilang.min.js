(function(t,n){typeof exports==="object"&&typeof module!=="undefined"?module.exports=n():typeof define==="function"&&define.amd?define(n):t.VueMultiLang=n()})(this,function(){"use strict";var e=function(t,n){for(var e in n){t[e]=n[e]}return t};var t=function(t){if(t===void 0)t={};var n={lang:[],path:"",defaultLang:"en",version:"1",langUrlRegExp:new RegExp("\\blang=(.+?)\\b","i"),langUaRegExp:new RegExp("\\blang\\/(.+?)\\b","i"),locationUrlRegExp:new RegExp("\\blocation=(.+?)\\b","i"),locationUaRegExp:new RegExp("\\blocation\\/(.+?)\\b","i"),rtlList:["ar"],dataType:"json",callback:function(){}};this.options=e(n,t);this.settings={isReady:false,langObj:{},list:[]}};t.prototype.langZip={cn:"cn,zh,zh-hans,zh-cn,zh-hans-cn,zh-sg,zh-hans-sg",tw:"tw,zh-hant,zh-hk,zh-mo,zh-tw,zh-hant-hk,zh-hant-mo,zh-hant-tw",en:"en,en-au,en-bz,en-ca,en-cb,en-ie,en-jm,en-nz,en-ph,en-za,en-tt,en-gb,en-us,en-zw,en-sg",th:"th,th-th",vi:"vn,vi-vn,vi,vn-vn",ru:"ru,ru-ru,ru-mo",id:"id,id-id,in-id",ko:"ko,ko-kr",hi:"in,hi,hi-in",sg:"sg",ar:"ar,ar-er,ar-sa,ar-eg,ar-dz,ar-tn,ar-ye,ar-jo,ar-kw,ar-bh,ar-iq,ar-ly,ar-ma,ar-om,ar-sy,ar-lb,ar-ae,ar-qa,ar-ss,ar-il",af:"af,af-za",tr:"tr,tr-tr",es:"es,es-ar,es-bo,es-cl,es-co,es-cr,es-do,es-ec,es-es,es-gt,es-hn,es-mx,es-ni,es-pa,es-pe,es-pr,es-py,es-sv,es-uy,es-ve,es-xl",ms:"ms,ms-bn,ms-my,my",pt:"pt,pt-pt,pt-br",ja:"ja,ja-jp,ja-ja,jp,jp-jp",ur:"ur,ur-pk",de:"de,de-at,de-ch,de-de,de-li,de-lu",ne:"ne,ne-np",bn:"bn,bn-bd,bn-in"};t.prototype.initLang=function(t){var n=this;var e=this.getLangCode();if(this.options.rtlList.indexOf(e.lang)!=-1){document.documentElement.setAttribute("dir","rtl")}this.add(this.options.callback);t._langUtil={langCode:e.lang,contryCode:e.contryCode,onReady:function(t){n.onReady(t)},template:function(t){return n.template.call(n,t,arguments)}};for(var a in t._langUtil){this.setLangCache(a,t._langUtil[a])}Object.defineProperty(t._langUtil,"langObj",{configurable:true,get:function(){return n.settings["langObj"]||{}},set:function(t){n.settings["langObj"]=t}});this.getFiles(this.options.path+"/"+e.lang+".json?v="+this.options.version)};t.prototype.getLangCode=function(){var t=this.getLangFromUrl();var n=this.getLangFromUA();var e=(t.lang||n.lang||navigator.language||navigator.userLanguage).toLowerCase();var a=t.contryCode||n.contryCode||"";if(this.options.lang&&this.options.lang.indexOf(e)==-1){var i=new RegExp("\\b"+e+"\\b","i");e=this.options.defaultLang;for(var o in this.langZip){if(this.langZip[o].match(i)){e=o;break}}}return{lang:e,contryCode:a}};t.prototype.getLangFromUrl=function(){var t=window.location.search.toLocaleLowerCase();var n=t.match(this.options.langUrlRegExp);var e=t.match(this.options.locationUrlRegExp);return{lang:n&&n[1],contryCode:e&&e[1]}};t.prototype.getLangFromUA=function(){var t=window.navigator.userAgent.toLocaleLowerCase();var n=t.match(this.options.langUaRegExp);var e=t.match(this.options.locationUaRegExp);return{lang:n&&n[1],contryCode:e&&e[1]}};t.prototype.getFiles=function(t){if(t==void 0){alert("can not find the lang file");return}var n={},e=this;if(window.XMLHttpRequest){n=new window.XMLHttpRequest}else{n=new window.ActiveXObject("Microsoft.XMLHTTP")}n.onreadystatechange=function(){if(n.readyState===4){if(n.status===200){try{var t=e.options.dataType==="txt"?n.responseText:JSON.parse(n.responseText);e.resolve(t)}catch(t){alert("bad lang file")}}else{alert("Get lang error")}}};n.onabort=function(){alert("Network error. Please refresh this page.")};n.open("GET",t);n.send()};t.prototype.add=function(t){if(typeof t==="function"){this.settings.list.push(t)}};t.prototype.resolve=function(n){this.settings.langObj=n;this.settings.isReady=true;this.setLangCache("langObj",n);this.settings.list.forEach(function(t){t&&t(n)});this.settings.list=[]};t.prototype.onReady=function(t){if(typeof t!=="function"){t=function(){}}if(this.settings.isReady){t&&t()}else{this.add(t)}};t.prototype.template=function(t,n){var e=n.length;var a=this.settings.langObj[t]||"";for(var i=1;i<e;i++){a=a.replace(/%s/,n[i])}return a};t.prototype.setLangCache=function(t,n){window.multiLang=window.multiLang||{};window.multiLang[t]=n};var a;function i(t){if(i.installed&&a===t){return}i.installed=true;a=t;var n=function(t){return t!==undefined};t.mixin({beforeCreate:function(){if(n(this.$options["multiLang"])){this._langRoot=this;this._langLoader=this.$options["multiLang"];this._langLoader.initLang(this)}else{this._langRoot=this.$parent&&this.$parent._langRoot||this}},destroyed:function(){this._langRoot=null;this._langLoader=null}});Object.defineProperty(t.prototype,"$lang",{get:function t(){return this._langRoot["_langUtil"]}})}t.install=i;t.version="1.0";var n=typeof window!=="undefined";if(n&&window.Vue){window.Vue.use(VueRouter)}return t});