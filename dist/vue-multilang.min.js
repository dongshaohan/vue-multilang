/*!
  * vue-multilang v1.0.3
  * (c) 2018 dongshaohan
  * @license MIT
  */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.VueMultiLang=n()}(this,function(){"use strict";var e,t=function(t){void 0===t&&(t={});this.settings={isReady:!1,langObj:{},list:[]},this.options=function(t,n){for(var e in n)t[e]=n[e];return t}({lang:[],path:"",defaultLang:"en",version:"1",langUrlRegExp:/\blang=(.+?)\b/i,langUaRegExp:/\blang\/(.+?)\b/i,locationUrlRegExp:/\blocation=(.+?)\b/i,locationUaRegExp:/\blocation\/(.+?)\b/i,rtlList:["ar"],dataType:"json",callback:function(){}},t)};return t.prototype.langZip=function(){return{cn:"cn,zh,zh-hans,zh-cn,zh-hans-cn,zh-sg,zh-hans-sg",tw:"tw,zh-hant,zh-hk,zh-mo,zh-tw,zh-hant-hk,zh-hant-mo,zh-hant-tw",en:"en,en-au,en-bz,en-ca,en-cb,en-ie,en-jm,en-nz,en-ph,en-za,en-tt,en-gb,en-us,en-zw,en-sg",th:"th,th-th",vi:"vn,vi-vn,vi,vn-vn",ru:"ru,ru-ru,ru-mo",id:"id,id-id,in-id",ko:"ko,ko-kr",hi:"in,hi,hi-in",sg:"sg",ar:"ar,ar-er,ar-sa,ar-eg,ar-dz,ar-tn,ar-ye,ar-jo,ar-kw,ar-bh,ar-iq,ar-ly,ar-ma,ar-om,ar-sy,ar-lb,ar-ae,ar-qa,ar-ss,ar-il",af:"af,af-za",tr:"tr,tr-tr",es:"es,es-ar,es-bo,es-cl,es-co,es-cr,es-do,es-ec,es-es,es-gt,es-hn,es-mx,es-ni,es-pa,es-pe,es-pr,es-py,es-sv,es-uy,es-ve,es-xl",ms:"ms,ms-bn,ms-my,my",pt:"pt,pt-pt,pt-br",ja:"ja,ja-jp,ja-ja,jp,jp-jp",ur:"ur,ur-pk",de:"de,de-at,de-ch,de-de,de-li,de-lu",ne:"ne,ne-np",bn:"bn,bn-bd,bn-in"}},t.prototype.initLang=function(t){var e=this,n=this.getLangCode();for(var o in-1!=this.options.rtlList.indexOf(n.lang)&&document.documentElement.setAttribute("dir","rtl"),this.add(this.options.callback),t._langUtil={langCode:n.lang,countryCode:n.countryCode,onReady:function(t){return e.onReady(t)},template:function(t,n){return e.template(t,n)}},t._langUtil)e.setLangCache(o,t._langUtil[o]);Object.defineProperty(t._langUtil,"langObj",{configurable:!0,get:function(){return e.settings.langObj},set:function(t){e.settings.langObj=t}}),this.getFiles(this.options.path+"/"+n.lang+".json?v="+this.options.version)},t.prototype.getLangCode=function(){var t=this.getLangFromUrl(),n=this.getLangFromUA(),e=(t.lang||n.lang||navigator.language||navigator.userLanguage).toLowerCase(),o=t.countryCode||n.countryCode||"";if(this.options.lang&&-1==this.options.lang.indexOf(e)){var a=new RegExp("\\b"+e+"\\b","i");for(var i in e=this.options.defaultLang,this.langZip())if(this.langZip()[i].match(a)){e=i;break}}return{lang:e,countryCode:o}},t.prototype.getLangFromUrl=function(){var t=window.location.search.toLocaleLowerCase(),n=t.match(this.options.langUrlRegExp),e=t.match(this.options.locationUrlRegExp);return{lang:n&&n[1],countryCode:e&&e[1]}},t.prototype.getLangFromUA=function(){var t=window.navigator.userAgent.toLocaleLowerCase(),n=t.match(this.options.langUaRegExp),e=t.match(this.options.locationUaRegExp);return{lang:n&&n[1],countryCode:e&&e[1]}},t.prototype.getFiles=function(t){var n=this,e={};(e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4===e.readyState)if(200===e.status)try{var t="txt"===n.options.dataType?e.responseText:JSON.parse(e.responseText);n.resolve(t)}catch(t){console.error(t.message),alert("bad lang file")}else alert("Get lang error")},e.onabort=function(){alert("Network error. Please refresh this page.")},e.open("GET",t),e.send()},t.prototype.add=function(t){"function"==typeof t&&this.settings.list.push(t)},t.prototype.resolve=function(n){this.settings.langObj=n,this.settings.isReady=!0,this.setLangCache("langObj",n),this.settings.list.forEach(function(t){t&&t(n)}),this.settings.list=[]},t.prototype.onReady=function(t){"function"!=typeof t&&(t=function(){}),this.settings.isReady?t&&t():this.add(t)},t.prototype.template=function(t,n){"object"==typeof n&&n.length||(n=[]);for(var e=n.length,o=this.settings.langObj[t]||"",a=0;a<e;a++)o=o.replace(/%s/,n[a]);return o},t.prototype.setLangCache=function(t,n){window.$multiLang=window.$multiLang||{},window.$multiLang[t]=n},t.install=function t(n){t.installed&&e===n||(t.installed=!0,(e=n).mixin({beforeCreate:function(){void 0!==this.$options.multiLang?((this._langRoot=this)._langLoader=this.$options.multiLang,this._langLoader.initLang(this)):this._langRoot=this.$parent&&this.$parent._langRoot||this},destroyed:function(){this._langRoot=null,this._langLoader=null}}),Object.defineProperty(n.prototype,"$lang",{get:function(){return this._langRoot._langUtil}}))},t.version="1.0.3","undefined"!=typeof window&&window.Vue&&window.Vue.use(t),t});